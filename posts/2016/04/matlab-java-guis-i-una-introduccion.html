<html><body><div style="text-align: justify;">Bienvenidos, esta será una mini-serie de entradas dedicadas a introducir a los usuarios de MATLAB en el desarrollo de interfaces gráficas utilizando una combinación de controles ordinarios de MATLAB con controles de la librería Swing de Java. Es necesario que el lector tenga conocimientos sólidos en el desarrollo de interfaces gráficas en MATLAB utilizando solamente código (no GUIDE), de programación orientada a objetos en MATLAB, y bueno, sería sensacional si conoce algo de Java.</div><div style="text-align: justify;"><br></div><h3 id="para-comenzar">Para comenzar</h3><div style="text-align: justify;"><br></div><div style="text-align: justify;">Las interfaces gráficas en MATLAB suelen considerarse hasta cierto punto muy limitadas en cuanto a apariencia, funcionalidad y sobre todo a la poca diversidad de controles gráficos disponibles en la librería estándar. Se extraña, por poner un ejemplo, que los <em>Static Text</em> tengan la posibilidad de añadir una imagen, o que a un botón le podamos agregar un ícono junto al texto, o bueno, varias de esas cosas que son posibles y relativamente sencillas de implementar en muchos otros toolkits de interfaces gráficas.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">No obstante, MATLAB tiene la posibilidad (y facilidad) de integrar controles gráficos de la librería Swing de Java de manera muy simple en una interfaz gráfica ordinaria. Esto puede lograrse utilizando la función <code style="white-space: pre;">javacomponent</code>, con la cual podemos <em>incrustar</em> controles gráficos de Java en una <em>figure</em> de MATLAB.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Para ir entrando un poco en el tema vamos a mostrar un código muy simple que coloca un JLabel (similar al <em>Static Text</em>) dentro de una GUI:</div><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">import javax.swing.*<br><br>fig = figure(<span class="st" style="color: #4070a0;">'Name'</span>,<span class="st" style="color: #4070a0;">'Ejemplo MATLAB-Java'</span>,...<br>    <span class="st" style="color: #4070a0;">'NumberTitle'</span>,<span class="st" style="color: #4070a0;">'off'</span>,...<br>    <span class="st" style="color: #4070a0;">'MenuBar'</span>,<span class="st" style="color: #4070a0;">'none'</span>,...<br>    <span class="st" style="color: #4070a0;">'Position'</span>,[<span class="fl" style="color: #40a070;">0</span>,<span class="fl" style="color: #40a070;">0</span>,<span class="fl" style="color: #40a070;">200</span>,<span class="fl" style="color: #40a070;">100</span>]);<br>centerfig(fig);<br><br>lab = JLabel(<span class="st" style="color: #4070a0;">'JLabel Java'</span>);<br>hJlab = javacomponent(lab, <span class="st" style="color: #4070a0;">'East'</span>, fig);</code></pre></div><br><div class="separator" style="clear: both; text-align: center;"></div><br><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-i61CZl7Uz0I/VwsgK6ojP0I/AAAAAAAACBk/EUM3No6tn54nFSsau_x8mkcFDNOIRVJ7Q/s1600/img_01.PNG" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://2.bp.blogspot.com/-i61CZl7Uz0I/VwsgK6ojP0I/AAAAAAAACBk/EUM3No6tn54nFSsau_x8mkcFDNOIRVJ7Q/s1600/img_01.PNG"></a></div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Ahora vamos a <em>desmenuzar</em> el código anterior:</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Primero, importamos todas las clases de la librería Swing, también hubiese sido muy recomendable sólo importar la clase Java que vamos a utilizar: <code style="white-space: pre;">import javax.swing.JLabel</code>. Pero, normalmente (<em>en la vida rea</em>l) no sólo se utiliza una de las clases de Swing, así que podríamos dejarlo tal cual y ya está. Al importar con <code style="white-space: pre;">import javax.swing.*</code> tenemos disponibles todas las clases de Swing en el <em>workspace</em> de MATLAB, así, sólo necesitamos escribir <code style="white-space: pre;">JLabel</code> para instanciar una etiqueta en lugar del <code style="white-space: pre;">javax.swing.JLabel</code> que deberíamos colocar si no colocamos la instrucción de importar.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Lo que sigue es crear una ventana con la función <code style="white-space: pre;">figure</code>, en la cual colocaremos nuestros controles Java. Y claro, la función <code style="white-space: pre;">centerfig</code> para centrar la ventana en la pantalla.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Aquí viene la parte en donde instanciamos un objeto de la clase <code style="white-space: pre;">JLabel</code>. Normalmente, en Java, tendríamos que escribir algo como:</div><br><div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">JLabel lab = <span class="kw" style="color: #007020; font-weight: bold;">new</span> JLabel(<span class="st" style="color: #4070a0;">"JLabel Java"</span>);</code></pre></div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Pero en MATLAB la sintaxis es más sencilla.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Una vez tenemos creado un objeto de la clase <code style="white-space: pre;">JLabel</code>, tenemos que colocarlo dentro de la ventana que hemos definido con anterioridad, y para eso usaremos la función <code style="white-space: pre;">javacomponent</code>. Lo primero: la función <code style="white-space: pre;">javacomponent</code> tiene la siguiente sintaxis:</div><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">[hJ, hM] = javacomponent(javaClassName, position, parent, callback);</code></pre></div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Donde <code style="white-space: pre;">javaClassName</code> puede ser un objeto o una clase de Java (en este caso la etiqueta que hemos instanciado), <code style="white-space: pre;">position</code> puede ser un vector de cuatro elementos típico de MATLAB o bien una cadena de texto: <em>South</em>, <em>West</em>, <em>North</em> o <em>East</em>, indicando la ubicación del elemento dentro de la ventana, <code style="white-space: pre;">parent</code> será la ventana o panel en el cual colocaremos el objeto gráfico, y finalmente<code style="white-space: pre;">callback</code> es un cell array de elementos <em>pareados</em> del tipo evento-handler y cuyo objetivo es especificar el comportamiento de un control gráfico ante un evento determinado, por ahora esto lo hemos dejado vacío, ya que no entraremos aún en el manejo de eventos.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">La función <code style="white-space: pre;">javacomponent</code> devuelve normalmente dos valores de salida: <code style="white-space: pre;">hJ</code> será la referencia a la clase Java del control gráfico y a través de este podremos modificar sus características; <code style="white-space: pre;">hM</code> es un handle cuasi ordinario de MATLAB y este nos servirá para modificar las propiedades de posición, unidades y visibilidad del objeto gráfico una vez que este haya sido agregado a la GUI MATLAB.</div><div style="text-align: justify;"><br></div><h3 id="modificando-las-propiedades-de-un-control-java-swing">Modificando las propiedades de un control Java Swing</h3><div style="text-align: justify;"><br></div><div style="text-align: justify;">Para modificar las propiedades de un componente creado con <code style="white-space: pre;">javacomponent</code> podemos hacerlo a través de su referencia, por ejemplo, para el JLabel que utilizamos al principio:</div><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">clear;clc;<br>import javax.swing.*<br><br>fig = figure(<span class="st" style="color: #4070a0;">'Name'</span>,<span class="st" style="color: #4070a0;">'Ejemplo MATLAB-Java'</span>,...<br>    <span class="st" style="color: #4070a0;">'NumberTitle'</span>,<span class="st" style="color: #4070a0;">'off'</span>,...<br>    <span class="st" style="color: #4070a0;">'MenuBar'</span>,<span class="st" style="color: #4070a0;">'none'</span>,...<br>    <span class="st" style="color: #4070a0;">'Position'</span>,[<span class="fl" style="color: #40a070;">0</span>,<span class="fl" style="color: #40a070;">0</span>,<span class="fl" style="color: #40a070;">200</span>,<span class="fl" style="color: #40a070;">100</span>]);<br>centerfig(fig);<br><br>lab = JLabel(<span class="st" style="color: #4070a0;">'JLabel Java'</span>);<br>[hJLab,hMLab] = javacomponent(lab, <span class="st" style="color: #4070a0;">'North'</span>, fig);<br>hJLab.setOpaque(true);<br>hJLab.setForeground(java.awt.Color.RED);<br>hJLab.setBackground(java.awt.Color.YELLOW)<br>hJLab.setHorizontalAlignment(JLabel.CENTER);</code></pre></div><br><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-HXUt3BZSZEQ/VwsfrBbCL0I/AAAAAAAACBc/REz08amEw-Mygn57S58CYsJdLcf_u_eqw/s1600/img_02.PNG" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://3.bp.blogspot.com/-HXUt3BZSZEQ/VwsfrBbCL0I/AAAAAAAACBc/REz08amEw-Mygn57S58CYsJdLcf_u_eqw/s1600/img_02.PNG"></a></div><br><br><div style="text-align: justify;">Como puede notar, las propiedades se modifican a través de métodos. Todos estos métodos disponibles para los controles de Java Swing puede consultarlos en la <a href="https://docs.oracle.com/javase/7/docs/api/javax/swing/package-summary.html">documentación oficial de Java</a>.</div><div style="text-align: justify;"><br></div><h3 id="para-aprender-más..." style="text-align: justify;">Para aprender más...</h3><div style="text-align: justify;"><br></div><div style="text-align: justify;">La referencia obligatoria y necesaria será siempre el blog <a href="http://undocumentedmatlab.com/"><strong>Undocumented MATLAB</strong></a> del gran Yair Altman, que es sin duda el lugar donde más información online encontraremos sobre la integración MATLAB-Java y muchas otras utilidades no documentadas de MATLAB.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">También existe el libro <strong>Undocumented Secrets of MATLAB-Java Programming</strong> del mismo Yair Altman, muy recomendable.</div><div style="text-align: justify;"><br></div><br><a href="https://www.crcpress.com/Undocumented-Secrets-of-MATLAB-Java-Programming/Altman/9781439869031"><img src="https://images.tandf.co.uk/common/jackets/amazon/978143986/9781439869031.jpg" width="15%"></a><br><h3 id="sumario-del-curso"><br></h3><h3 id="sumario-del-curso">Sumario del curso</h3><br>Esta lista de se irá actualizando conforme se publiquen nuevas entradas:<br><ul><li><a href="https://www.blogger.com/blogger.g?blogID=204088497223398789">MATLAB-Java GUIs I. Una introducción</a></li></ul></body></html>