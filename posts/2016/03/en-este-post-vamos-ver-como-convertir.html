<html><body><div style="text-align: justify;">En este post vamos a ver cómo convertir una matriz de MATLAB a un string en formato LaTeX, proponiendo en primera instancia un código muy simple y poco robusto, y posteriormente les compartiré un <a href="http://www.mathworks.com/matlabcentral/fileexchange/2832-latex">código</a> desarrollado por <a href="http://www.mathworks.com/matlabcentral/profile/authors/631894-toby-driscoll">Toby Driscoll</a> que puede descargarse desde el File Exchange de MathWorks.</div><br>Sabrá que las matrices/arreglos en LaTeX suelen tener la sintaxis:<br><br><pre><code>\begin{matrix}<br>  a &amp; b &amp; c \\<br>  d &amp; e &amp; f \\<br>  g &amp; h &amp; i<br> \end{matrix}</code></pre><br><div style="text-align: justify;">Así, la idea en principio parece muy básica: recorrer todos los elementos de la matriz MATLAB por filas y columnas e ir formando el string final que se retornará como salida.</div><br>Vamos mostrando el código:<br><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">function out = matrix2latex(M,fmt)<br><span class="co" style="color: #60a0b0; font-style: italic;">% </span><br><span class="co" style="color: #60a0b0; font-style: italic;">% Argumentos de entrada:</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%       M    -   Matriz</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%       fmt  -   Cadena para especificar el formato ('%0.4f' default)</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%</span><br>if nargin&lt;<span class="fl" style="color: #40a070;">2</span>, fmt=<span class="st" style="color: #4070a0;">'%0.4f'</span>; end;<br>out = [<span class="st" style="color: #4070a0;">'begin{matrix}'</span>,sprintf(<span class="st" style="color: #4070a0;">'\n'</span>)];<br>for ii=<span class="fl" style="color: #40a070;">1</span>:size(M,<span class="fl" style="color: #40a070;">1</span>)<br>    for jj=<span class="fl" style="color: #40a070;">1</span>:size(M,<span class="fl" style="color: #40a070;">2</span>)<br>        ce = sprintf([fmt,blanks(<span class="fl" style="color: #40a070;">2</span>),<span class="st" style="color: #4070a0;">'&amp;'</span>,blanks(<span class="fl" style="color: #40a070;">2</span>)],M(ii,jj));<br>        out = [out,ce]; <span class="co" style="color: #60a0b0; font-style: italic;">%#ok</span><br>    end<br>    out = [out(<span class="fl" style="color: #40a070;">1</span>:end-<span class="fl" style="color: #40a070;">3</span>),<span class="st" style="color: #4070a0;">'\\'</span>,sprintf(<span class="st" style="color: #4070a0;">'\n'</span>)];<br>end<br>out = [out(<span class="fl" style="color: #40a070;">1</span>:end-<span class="fl" style="color: #40a070;">3</span>), sprintf(<span class="st" style="color: #4070a0;">'\n\\end{matrix}'</span>)];<br>end</code></pre></div><br><div style="text-align: justify;">Esta función debe ejecutarse, pasando como argumento la matriz de la cual quiere obtenerse la representación LaTeX.</div><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">&gt;&gt; A=rand(<span class="fl" style="color: #40a070;">3</span>)<br><br>A =<br><br>    <span class="fl" style="color: #40a070;">0.1067</span>    <span class="fl" style="color: #40a070;">0.7749</span>    <span class="fl" style="color: #40a070;">0.0844</span><br>    <span class="fl" style="color: #40a070;">0.9619</span>    <span class="fl" style="color: #40a070;">0.8173</span>    <span class="fl" style="color: #40a070;">0.3998</span><br>    <span class="fl" style="color: #40a070;">0.0046</span>    <span class="fl" style="color: #40a070;">0.8687</span>    <span class="fl" style="color: #40a070;">0.2599</span><br><br>&gt;&gt; matrix2latex(A)<br><br>ans =<br><br>begin{matrix}<br><span class="fl" style="color: #40a070;">0.1067</span>  &amp;  <span class="fl" style="color: #40a070;">0.7749</span>  &amp;  <span class="fl" style="color: #40a070;">0.0844</span>  \\<br><span class="fl" style="color: #40a070;">0.9619</span>  &amp;  <span class="fl" style="color: #40a070;">0.8173</span>  &amp;  <span class="fl" style="color: #40a070;">0.3998</span>  \\<br><span class="fl" style="color: #40a070;">0.0046</span>  &amp;  <span class="fl" style="color: #40a070;">0.8687</span>  &amp;  <span class="fl" style="color: #40a070;">0.2599</span>  <br>\end{matrix}</code></pre></div><br><div style="text-align: justify;">¿Bastante bien, cierto?, sí, hasta cierto punto, pero es una porción de código sin testear más allá de algunos casos básicos considerados.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Por ello les adjunto enseguida un código compartido por Toby Driscoll en <a href="http://www.mathworks.com/matlabcentral/fileexchange/">File Exchange</a> el cual contiene al menos sentencias que verifican que los argumentos pasados sean del tipo esperado, y eso es bastante bueno, al menos para empezar.</div><br><button class="btn-primary" href="">Mostrar código</button><br><div class="collapse" id="latex-fun-code"><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">function s = latex(M,varargin)<br><span class="co" style="color: #60a0b0; font-style: italic;">%LATEX   Print a matrix in LaTeX tabular format.</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   LATEX(M) prints out the numeric matrix M in a LaTeX tabular</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   format. The '&amp;' character appears between entries in a row, '\\'</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   is appended to the ends of rows, and each entry is set in math</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   mode. Complex numbers are understood, and exponentials will be</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   converted to a suitable format.</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   LATEX(M,'nomath') does not include the $$ needed to put each </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   entry in math mode (e.g., for use with the amsmath matrix modes).</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   LATEX(M,FMT) uses a format specifier FMT of the SPRINTF type for</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   each entry.</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   LATEX(M,FMT1,FMT2,...) works through the given format specifiers</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   on each row of M. If fewer are given than the column size of M,</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   the last is used repeatedly for the rest of the row.</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   S = LATEX(M,...) does not display output but returns a character</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   array S.</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   Examples:</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%     latex( magic(4) )</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%     latex( magic(4), '%i', 'nomath' )</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%     latex( magic(4), '%i', '%.2f' )</span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   </span><br><span class="co" style="color: #60a0b0; font-style: italic;">%   See also SPRINTF, SYM/LATEX.</span><br><br><span class="co" style="color: #60a0b0; font-style: italic;">%   Copyright 2002 by Toby Driscoll. Last updated 12/06/02.</span><br><br>if ~isa(M,<span class="st" style="color: #4070a0;">'double'</span>)<br>  error(<span class="st" style="color: #4070a0;">'Works only for arrays of numbers.'</span>)<br>elseif ndims(M) &gt; <span class="fl" style="color: #40a070;">2</span><br>  error(<span class="st" style="color: #4070a0;">'Works only for 2D arrays.'</span>)<br>end<br><br>if nargin &lt; <span class="fl" style="color: #40a070;">2</span><br>  fmt = {<span class="st" style="color: #4070a0;">'%#.5g'</span>};<br>  mathstr = <span class="st" style="color: #4070a0;">'$'</span>;<br>else<br>  fmt = varargin;<br>  idx = strmatch(<span class="st" style="color: #4070a0;">'nomath'</span>,fmt);<br>  if isempty(idx)<br>    mathstr = <span class="st" style="color: #4070a0;">'$'</span>;<br>  else  <br>    mathstr = <span class="st" style="color: #4070a0;">''</span>;<br>    fmt = fmt([<span class="fl" style="color: #40a070;">1</span>:idx-<span class="fl" style="color: #40a070;">1</span> idx+<span class="fl" style="color: #40a070;">1</span>:end]);<br>    if isempty(fmt), fmt = {<span class="st" style="color: #4070a0;">'%#.5g'</span>}; end<br>  end <br>end<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Extend the format specifiers.</span><br>[m,n] = size(M);<br>if n &gt; length(fmt)<br>  [fmt{end:n}] = deal(fmt{end});<br>end<br>  <br><span class="co" style="color: #60a0b0; font-style: italic;">% Create one format for a row.</span><br>rowfmt = <span class="st" style="color: #4070a0;">''</span>;<br>for p = <span class="fl" style="color: #40a070;">1</span>:n<br>  <span class="co" style="color: #60a0b0; font-style: italic;">% Remove blanks.</span><br>  thisfmt = deblank(fmt{p});<br><br>  <span class="co" style="color: #60a0b0; font-style: italic;">% Add on imaginary part if needed.</span><br>  if ~isreal(M(:,p)) <br>    <span class="co" style="color: #60a0b0; font-style: italic;">% Use the same format as for the real part, but force a + sign for</span><br>    <span class="co" style="color: #60a0b0; font-style: italic;">% positive numbers. </span><br>    ifmt = thisfmt;<br>    j = findstr(ifmt,<span class="st" style="color: #4070a0;">'%'</span>);<br>    if ~any(strcmp(ifmt(j+<span class="fl" style="color: #40a070;">1</span>),[<span class="st" style="color: #4070a0;">'-'</span>;<span class="st" style="color: #4070a0;">'+'</span>;<span class="st" style="color: #4070a0;">' '</span>;<span class="st" style="color: #4070a0;">'#'</span>]))<br>      ifmt = [ifmt(<span class="fl" style="color: #40a070;">1</span>:j) <span class="st" style="color: #4070a0;">'+'</span> ifmt(j+<span class="fl" style="color: #40a070;">1</span>:end)];<br>    else<br>      ifmt(j+<span class="fl" style="color: #40a070;">1</span>) = <span class="st" style="color: #4070a0;">'+'</span>;<br>    end<br>    ifmt = [ifmt <span class="st" style="color: #4070a0;">'i'</span>];<br>    thisfmt = [thisfmt ifmt];<br>  end<br><br>  <span class="co" style="color: #60a0b0; font-style: italic;">% Add to row.</span><br>  rowfmt = [rowfmt mathstr thisfmt mathstr <span class="st" style="color: #4070a0;">' &amp; '</span>];<br>end<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% After last column, remove column separator and put in newline.</span><br>rowfmt(end-<span class="fl" style="color: #40a070;">1</span>:end) = [];<br>rowfmt = [rowfmt <span class="st" style="color: #4070a0;">'\\\\\n'</span>];<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Use it.</span><br>A = M.';<br>if isreal(M)<br>  S = sprintf(rowfmt,A);<br>else<br>  S = sprintf(rowfmt,[real(A(:)) imag(A(:))].');<br>end<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Remove extraneous imaginary part for real entries.</span><br>if ~isreal(M)<br>  zi = sprintf(ifmt,<span class="fl" style="color: #40a070;">0</span>);<br>  S = strrep(S,zi,blanks(length(zi)));<br>end<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Remove NaNs.</span><br>S = strrep(S,<span class="st" style="color: #4070a0;">'$NaN$'</span>,<span class="st" style="color: #4070a0;">'--'</span>);<br>S = strrep(S,<span class="st" style="color: #4070a0;">'NaN'</span>,<span class="st" style="color: #4070a0;">'--'</span>);<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Convert 'e' exponents to LaTeX form. This is probably really slow, but</span><br><span class="co" style="color: #60a0b0; font-style: italic;">% what can you do without regular expressions?</span><br>S = strrep(S,<span class="st" style="color: #4070a0;">'e'</span>,<span class="st" style="color: #4070a0;">'E'</span>);<br>ex = min(findstr(S,<span class="st" style="color: #4070a0;">'E'</span>));<br>while ~isempty(ex)<br>  <span class="co" style="color: #60a0b0; font-style: italic;">% Find first non-digit character. Where is ISDIGIT?</span><br>  j = ex+<span class="fl" style="color: #40a070;">2</span>;<br>  while ~isempty(str2num(S(j))) &amp; ~strcmp(S(j),<span class="st" style="color: #4070a0;">'i'</span>)<br>    j = j+<span class="fl" style="color: #40a070;">1</span>;<br>  end<br><br>  <span class="co" style="color: #60a0b0; font-style: italic;">% This strips off leading '+' and zeros.</span><br>  num = sprintf(<span class="st" style="color: #4070a0;">'%i'</span>,str2num(S(ex+<span class="fl" style="color: #40a070;">1</span>:j-<span class="fl" style="color: #40a070;">1</span>)));<br>  <br>  ee = [<span class="st" style="color: #4070a0;">'\times 10^{'</span> num <span class="st" style="color: #4070a0;">'}'</span>];<br>  S = [S(<span class="fl" style="color: #40a070;">1</span>:ex-<span class="fl" style="color: #40a070;">1</span>) ee S(j:end)];<br>  <br>  ex = ex + min(findstr(S(ex+<span class="fl" style="color: #40a070;">1</span>:end),<span class="st" style="color: #4070a0;">'E'</span>));<br>end<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% For good form, remove that last '\\'.</span><br>S(end-<span class="fl" style="color: #40a070;">2</span>:end-<span class="fl" style="color: #40a070;">1</span>) = <span class="st" style="color: #4070a0;">'  '</span>;<br><br><span class="co" style="color: #60a0b0; font-style: italic;">% Display or output?</span><br>if nargout==<span class="fl" style="color: #40a070;">0</span><br>  disp(S)<br>else<br>  s = S;<br>end</code></pre></div></div><br>La ejecución de la función anterior es prácticamente similar a nuestra función propuesta:<br><br><div class="sourceCode"><pre class="sourceCode matlab"><code class="sourceCode matlab">&gt;&gt; A=rand(<span class="fl" style="color: #40a070;">3</span>)<br><br>A =<br><br>    <span class="fl" style="color: #40a070;">0.5499</span>    <span class="fl" style="color: #40a070;">0.6221</span>    <span class="fl" style="color: #40a070;">0.4018</span><br>    <span class="fl" style="color: #40a070;">0.1450</span>    <span class="fl" style="color: #40a070;">0.3510</span>    <span class="fl" style="color: #40a070;">0.0760</span><br>    <span class="fl" style="color: #40a070;">0.8530</span>    <span class="fl" style="color: #40a070;">0.5132</span>    <span class="fl" style="color: #40a070;">0.2399</span><br><br>&gt;&gt; latex(A)<br>$<span class="fl" style="color: #40a070;">0.54986</span>$ &amp; $<span class="fl" style="color: #40a070;">0.62206</span>$ &amp; $<span class="fl" style="color: #40a070;">0.40181</span>$ \\<br>$<span class="fl" style="color: #40a070;">0.14495</span>$ &amp; $<span class="fl" style="color: #40a070;">0.35095</span>$ &amp; $<span class="fl" style="color: #40a070;">0.075967</span>$ \\<br>$<span class="fl" style="color: #40a070;">0.85303</span>$ &amp; $<span class="fl" style="color: #40a070;">0.51325</span>$ &amp; $<span class="fl" style="color: #40a070;">0.23992</span>$   </code></pre></div><br><div style="text-align: justify;">La salida, un tanto similar, si, cosas más cosas menos, pero la idea central es la misma.</div><div style="text-align: justify;"><br></div><div style="text-align: justify;">Y bueno, en el siguiente link podrá encontrar más funciones similares que exportan cosas de MATLAB a código LaTeX, lo cual nunca está de más.</div><br><a class="uri" href="http://www.mathworks.com/matlabcentral/fileexchange/?term=latex&amp;sort=ratings_desc">http://www.mathworks.com/matlabcentral/fileexchange/?term=latex&amp;sort=ratings_desc</a></body></html>